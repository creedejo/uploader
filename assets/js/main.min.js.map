{"version":3,"sources":["main.js"],"names":["$uploader","document","getElementById","$form","$","$status","ready","window","FileReader","addEventListener","e","stopPropagation","preventDefault","dataTransfer","dropEffect","this","addClass","html","fadeIn","removeClass","fadeOut","uploadable","validation_error","file","files","file_type","type","console","log","file_size","size","max_file","data","FormData","append","name","ajax","url","processData","contentType","success","textStatus","jqXHR","error","errorThrown","alert"],"mappings":"AAAA,GAAAA,WAAAC,SAAAC,eAAA,YACAC,MAAAC,EAAA,cACAC,QAAAD,EAAA,UAGAA,GAAAH,UAAAK,MAAA,WAEAC,OAAAC,YACAR,UAAAS,iBAAA,WAAA,SAAAC,GACAA,EAAAC,kBACAD,EAAAE,iBACAF,EAAAG,aAAAC,WAAA,OACAV,EAAAW,MAAAC,SAAA,YACAX,QAAAY,KAAA,iCACAZ,QAAAa,WACA,GAEAlB,UAAAS,iBAAA,YAAA,SAAAC,GACAA,EAAAC,kBACAD,EAAAE,iBACAR,EAAAW,MAAAI,YAAA,YACAd,QAAAY,KAAA,IACAZ,QAAAe,YACA,GAEApB,UAAAS,iBAAA,OAAA,SAAAC,GACAA,EAAAC,kBACAD,EAAAE,gBAEA,IAAAS,IAAA,EACAC,EAAA,GACAC,EAAAb,EAAAG,aAAAW,MAAA,GAGAC,EAAAF,EAAAG,IACAC,SAAAC,IAAA,cAAAH,GAGA,aAAAA,GAAA,cAAAA,GAAA,aAAAA,IACAJ,GAAA,EACAC,EAAA,4BAIA,IAAAO,GAAAN,EAAAO,IACAH,SAAAC,IAAA,cAAAC,EACA,IAAAE,GAAA,GASA,IARAF,EAAAE,IACAV,GAAA,EACA,IAAAC,IACAA,GAAA,QAEAA,GAAA,wDAGAD,EAAA,CAGA,GAAAW,GAAA,GAAAC,SACAD,GAAAE,OAAA,OAAAX,EAAAA,EAAAY,MACA9B,QAAAY,KAAA,gBACAZ,QAAAa,SACAd,EAAAgC,MACAC,IAAA,aACAX,KAAA,OACAM,KAAAA,EACAM,aAAA,EACAC,aAAA,EACAC,QAAA,SAAAR,EAAAS,EAAAC,GAEAf,QAAAC,IAAA,aAAAI,GACA3B,QAAAY,KAAAe,IAGAW,MAAA,SAAAD,EAAAD,EAAAG,GAEAjB,QAAAC,IAAA,gBAMAN,GAAA,kCAAAA,EACAjB,QAAAY,KAAAK,KAGA,IAGAuB,MAAA","file":"main.min.js","sourcesContent":["var $uploader = document.getElementById('uploader');\r\nvar $form = $(\"#file-form\");\r\nvar $status = $(\".status\");\r\n\r\n\r\n$(document).ready(function(){\r\n\t//check for browser support\r\n\tif(window.FileReader){\r\n\t\t$uploader.addEventListener('dragover',function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\te.dataTransfer.dropEffect='copy';\r\n\t\t\t$(this).addClass('dragover');\r\n\t\t\t$status.html(\"Drop the file here to upload.\");\r\n\t\t\t$status.fadeIn();\r\n\t\t},false);\r\n\r\n\t\t$uploader.addEventListener('dragleave',function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\t$(this).removeClass('dragover');\r\n\t\t\t$status.html(\"\");\r\n\t\t\t$status.fadeOut();\r\n\t\t},false);\r\n\r\n\t\t$uploader.addEventListener('drop',function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tvar uploadable = true;\r\n\t\t\tvar validation_error = \"\";\r\n\t\t\tvar file=e.dataTransfer.files[0];\r\n\r\n\t\t\t//check file type\r\n\t\t\tvar file_type = file.type;\r\n\t\t\tconsole.log(\"FILE TYPE: \" + file_type);\r\n\r\n\t\t\t//check if the file is an image\r\n\t\t\tif(file_type!=\"image/png\" && file_type!=\"image/jpeg\" && file_type!=\"image/gif\"){\r\n\t\t\t\tuploadable=false;\r\n\t\t\t\tvalidation_error = \"The file must be an image\"\r\n\t\t\t}\r\n\r\n\t\t\t//check file size\r\n\t\t\tvar file_size = file.size;\r\n\t\t\tconsole.log(\"FILE SIZE: \" + file_size);\r\n\t\t\tvar max_file = 10000;\r\n\t\t\tif(file_size>max_file){\r\n\t\t\t\tuploadable=false;\r\n\t\t\t\tif(validation_error!=\"\"){\r\n\t\t\t\t\tvalidation_error+=\"<br>\";\r\n\t\t\t\t}\r\n\t\t\t\tvalidation_error+=\"The file is too large.  It must be smaller than 10Mb\";\r\n\t\t\t}\r\n\r\n\t\t\tif(uploadable){\r\n\r\n\r\n\t\t\t\tvar data = new FormData();\r\n\t\t\t\tdata.append('file',file,file.name);\r\n\t\t\t\t$status.html(\"Uploading...\");\r\n\t\t\t\t$status.fadeIn();\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t    url : \"upload.php\",\r\n\t\t\t\t    type: \"POST\",\r\n\t\t\t\t    data : data,\r\n\t\t\t\t    processData:false,\r\n\t\t\t\t    contentType:false,\r\n\t\t\t\t    success: function(data, textStatus, jqXHR)\r\n\t\t\t\t    {\r\n\t\t\t\t        console.log(\"SUCCESS - \" + data);\r\n\t\t\t\t        $status.html(data);\r\n\t\t\t\t        //$status.fadeIn();\r\n\t\t\t\t    },\r\n\t\t\t\t    error: function (jqXHR, textStatus, errorThrown)\r\n\t\t\t\t    {\r\n\t\t\t\t \t\tconsole.log(\"ERROR\");\r\n\t\t\t\t    }\r\n\t\t\t\t});\r\n\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tvalidation_error = \"<h2>Unable to upload file:</h2>\" + validation_error;\r\n\t\t\t\t $status.html(validation_error);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},false);\r\n\t}\r\n\telse{\r\n\t\talert(\"I'm sorry.  Your browser does not support this upload method.\");\r\n\t}\r\n});"],"sourceRoot":"/source/"}